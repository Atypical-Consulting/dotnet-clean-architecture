# Production environment overrides

namespace: clean-architecture-production

accountsApi:
  replicaCount: 3
  image:
    tag: "stable"
    pullPolicy: Always
  environment: Production
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 20
    targetCPUUtilizationPercentage: 60
    targetMemoryUtilizationPercentage: 70
  ingress:
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/rate-limit: "100"
      nginx.ingress.kubernetes.io/rate-limit-window: "1m"
    hosts:
      - host: app.example.com
        paths:
          - path: /accounts-api
            pathType: Prefix
    tls:
      - secretName: clean-architecture-prod-tls
        hosts:
          - app.example.com

walletApp:
  replicaCount: 3
  image:
    tag: "stable"
    pullPolicy: Always
  environment: Production
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  ingress:
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    hosts:
      - host: app.example.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: clean-architecture-prod-tls
        hosts:
          - app.example.com

postgresql:
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 2Gi
  persistence:
    size: 50Gi
